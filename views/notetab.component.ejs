        <% var counter = 0; %>
        <% var firstNode; %>
        <% var currentUserData = []; %>

        <!-- <% console.log(fetchData[noteId]) %> -->


        <div class="show__list">
            <div class="show__list__header">
                <h3>Note List</h3>
                <img src="../../images/remove.png" width="22" alt="" onclick="onClickRemoveBtn()">
            </div>
            <div class="show__list__content" id="noteList">
                
                <% fetchData===undefined?fetchData="":fetchData.map((data,key) => { %>
                    
                    <% if(data.userId === userId) {%>
                        <% console.log(data.userId + " true") %>
                        <% currentUserData.push(data) %>    
                    <% } %>

                <% }) %>
                <% console.log("data") %>
                <% console.log(currentUserData) %>
                <% fetchData = currentUserData; %>


                <% fetchData===""?fetchData="":fetchData.map((data,key) => { %>
                    <% console.log(key) %> 
                    
                    
                    <% const destructureArray = data.note_list.split(','); %>
                    <% const destructureTime = new Date(data.note_insertDate) %>

                    <% if(data.userId === userId){ %>
                        <% if(key < firstNode || firstNode === undefined){%>
                            <% firstNode = key; %>
                        <% } %>
                        
                        <% if(key === parseInt(noteId)){ %>
                            <div class="content__list " id="<%= key %>">
                                <div class="info" onClick="getNoteData('<%= key %>','<%= JSON.stringify(data) %>','<%= firstNode %>','<%= noteId %>', '<%= userId %>')">
                                    <h3><%=data.note_title %></h3>
                                    <div class="note__time">
                                        <p><%=destructureArray[0] %></p>
                                        <span id="spanTimeUpdate"><%=destructureTime.toLocaleString('UTC', { hour: 'numeric', minute: 'numeric', hour12: true }) %></span>
                                    </div>
                                </div>
                                <div id="removeContainer" class="removeClass" onclick="removeNoteFromList('<%=data.id%>')"">
                                    <img width="20"src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzg0IDM4NCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzg0IDM4NDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxnPg0KCQkJPHBhdGggZD0iTTY0LDM0MS4zMzNDNjQsMzY0LjkwNyw4My4wOTMsMzg0LDEwNi42NjcsMzg0aDE3MC42NjdDMzAwLjkwNywzODQsMzIwLDM2NC45MDcsMzIwLDM0MS4zMzN2LTI1Nkg2NFYzNDEuMzMzeiIvPg0KCQkJPHBvbHlnb24gcG9pbnRzPSIyNjYuNjY3LDIxLjMzMyAyNDUuMzMzLDAgMTM4LjY2NywwIDExNy4zMzMsMjEuMzMzIDQyLjY2NywyMS4zMzMgNDIuNjY3LDY0IDM0MS4zMzMsNjQgMzQxLjMzMywyMS4zMzMgCQkJIi8+DQoJCTwvZz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==" />
                                </div>
                            </div>
                        <% }else{ %>
                            <div class="content__list list__notFocus" id="<%= key %>" >
                                <div class="info" onclick="getNoteData('<%= key %>','<%= JSON.stringify(data) %>','<%= firstNode %>','<%= noteId %>','<%= userId %>')">
                                    <h3><%=data.note_title %></h3>
                                    <div class="note__time">
                                        <p><%=destructureArray[0] %></p>
                                        <span id="spanTimeUpdate"><%=destructureTime.toLocaleString('UTC', { hour: 'numeric', minute: 'numeric', hour12: true }) %></span>
                                    </div>
                                </div>
                                <div id="removeContainer" class="removeClass" onclick="removeNoteFromList('<%=data.id%>')">
                                    <img width="20"src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzg0IDM4NCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzg0IDM4NDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxnPg0KCQkJPHBhdGggZD0iTTY0LDM0MS4zMzNDNjQsMzY0LjkwNyw4My4wOTMsMzg0LDEwNi42NjcsMzg0aDE3MC42NjdDMzAwLjkwNywzODQsMzIwLDM2NC45MDcsMzIwLDM0MS4zMzN2LTI1Nkg2NFYzNDEuMzMzeiIvPg0KCQkJPHBvbHlnb24gcG9pbnRzPSIyNjYuNjY3LDIxLjMzMyAyNDUuMzMzLDAgMTM4LjY2NywwIDExNy4zMzMsMjEuMzMzIDQyLjY2NywyMS4zMzMgNDIuNjY3LDY0IDM0MS4zMzMsNjQgMzQxLjMzMywyMS4zMzMgCQkJIi8+DQoJCTwvZz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==" />
                                </div>
                            </div>
                        <% } %>
                    <% } %>
                <% }) %>
            </div>
            <div class="add__note">
                <a href="javascript:void(0)" onClick="showAddNote('show');">Add new notes</a>
            </div>
        </div>

        <% if(fetchData[noteId] !== undefined && fetchData[noteId].userId === userId) { %>

        <div class="list__main__content" id="sendfile">
            <div class="list__main__content__wrap">
                <div class="main__content__header">
                    <p><%=fetchData[noteId].note_title%></p>
                </div>
                <div class="main__content__remaining__edit">
                    <span><span id="taskRemaining">0</span> tasks remaining</span>
                    <a href="javascript:void(0)" onclick="editClick('<%=fetchData[noteId].id %>')">Edit</a>
                </div>
                <div class="main__content__add">
                    <input type="text" id="addListText" value="">
                    <button type="button" onclick="addList('<%=fetchData[noteId].note_list %>','<%=fetchData[noteId].id %>','<%=fetchData[noteId].note_title%>')">+</button>
                </div>
                <div class="main__content__checkbox">
                    <div class="main__content__checkbox__wrap" id="wrapLabel">
                        <% const listString = fetchData[noteId].note_list; %>
                        <% const splitData = listString.split(","); %>
                        <% const listKeysString = fetchData[noteId].note_keys; %>
                        <% const splitDataKey = listKeysString.split(","); %>

                        <% const objectCheckedData = fetchData[noteId].checked_list; %>
                        
                        <% const checkedID = objectCheckedData != "" ? JSON.parse(objectCheckedData) : "" %>

                        <% if(listString !== "") { %>
                            <% for(let i=0;i<splitData.length;i++){ %>
                                <% if(checkedID != "" && checkedID.some(e => e.id.replace("checkBox","") == i+1 )) {%>
                                    <div class="checkBoxLabel checkBoxLabel<%=i%>" >
                                        <label for="">
                                            <input type="checkbox" class="ClasscheckBox" value="<%=splitDataKey[i]%>,<%=splitData[i]%>" id="<%=splitDataKey[i]%>checkBox" onclick="checkboxClick('<%=splitDataKey[i]%>checkBox','<%= JSON.stringify(checkedID) %>','<%=fetchData[noteId].id %>')" checked>
                                            <span class="checkedList spanListText" id="<%=splitDataKey[i]%>checkBoxSpan"><%=splitData[i] %></span>
                                            <input style="text-decoration: line-through;" type="text" class="editListTextInput" value="<%=splitData[i] %>">
                                        </label>
                                        <a class="removeBtn get<%=splitDataKey[i]%>" href="javascript:void(0)" onclick="removeClick('<%=splitDataKey[i]%>','<%=splitData%>','<%=fetchData[noteId].id %>')" id="checkBoxRemove" value="<%=splitDataKey[i]%>"><img width="15" src="../assets/images/removeIcon.png" alt=""></a>
                                    </div>
                                <% }else{ %>
                                    <% counter++; %>
                                    <div class="checkBoxLabel checkBoxLabel<%=i%>">
                                        <label for="">
                                            <input type="checkbox" class="ClasscheckBox" value="<%=splitDataKey[i]%>,<%=splitData[i]%>" id="<%=splitDataKey[i]%>checkBox" onclick="checkboxClick('<%=splitDataKey[i]%>checkBox','<%= JSON.stringify(checkedID) %>','<%=fetchData[noteId].id %>')">
                                            <span class="spanListText" id="<%=splitDataKey[i]%>checkBoxSpan" ><%=splitData[i] %></span>
                                            <input type="text" class="editListTextInput" value="<%=splitData[i] %>">
                                        </label>
                                        <a class="removeBtn get<%=splitDataKey[i]%>" href="javascript:void(0)" onclick="removeClick('<%=splitDataKey[i]%>','<%=splitData%>','<%=fetchData[noteId].id %>')" id="checkBoxRemove" value="<%=splitDataKey[i]%>"><img width="15" src="../assets/images/removeIcon.png" alt=""></a>
                                    </div>
                                <% } %>
                            <% }  %>
                            <script>const counterValue = document.getElementById("taskRemaining").innerHTML = '<%=counter %>' </script>
                        <% } %>
                        
                    </div>
                </div>
                <!-- remove class note__savebtn -->
            </div>
        </div>
        <% } else { %>
        <div class="list__main__content" id="sendfile">
            <h1>No List</h1>
        </div>
        <% } %>


        <div class="add__note__settings" id="showAddNote">
                <div class="add__note__options">
                    <div class="exit__btn">
                        <button type="button" onClick="showAddNote('hide');">X</button>
                    </div>
                    <div class="add__note__content">
                        <label for="noteTitle">Note Title</label>
                        <div class="text__container">
                            <input type="text" id="noteTitle"><br>
                            <button type="button" onClick="addNote('<%=fetchData.length %>')">Save</button>
                        </div>
                    </div>
                </div>
        </div>